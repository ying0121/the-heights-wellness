<script>
    lottie.loadAnimation({
        container: document.getElementById('security-lottie'),
        renderer: 'svg',
        loop: true,
        autoplay: true,
        path: './assets/animations/questions.json'
    })
</script>
<script>
    const passwordInput = document.getElementById('password')
    const passwordToggleIcon = document.getElementById('password-icon')

    passwordToggleIcon.addEventListener('pointerdown', (e) => {
        e.preventDefault()
        // Toggle input type between password and text
        if (passwordInput.type === 'password') {
            passwordInput.type = 'text'
            passwordToggleIcon.classList.remove('fa-eye')
            passwordToggleIcon.classList.add('fa-eye-slash')
        } else {
            passwordInput.type = 'password'
            passwordToggleIcon.classList.remove('fa-eye-slash')
            passwordToggleIcon.classList.add('fa-eye')
        }
    })

    function showAlert(title, message, type) {
        if (title) {
            Swal.fire({
                title: title,
                text: message,
                icon: type,
                confirmButtonText: 'Close'
            })
        } else {
            Swal.fire({
                text: message,
                icon: type,
                confirmButtonText: 'Close'
            })
        }
    }

    $(document).ready(function() {
        $("#submit").click(function (e) {
            e.preventDefault()

            const params = {
                answer: $("#password").val()
            }

            $.post({
                url: "./confirmSecurity",
                data: params,
                dataType: "json",
                success: function (res) {
                    window.location.href = res.url
                }, error: function (xhr, status, error) {
                    showAlert("", "<%= component_text.t_pa_ah_alert_failed %>", "error")
                }
            })
        })

    })
</script>